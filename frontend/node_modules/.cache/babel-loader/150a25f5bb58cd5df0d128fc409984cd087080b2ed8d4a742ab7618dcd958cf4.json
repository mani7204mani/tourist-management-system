{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rocky\\\\OneDrive\\\\Desktop\\\\tms-project\\\\frontend\\\\src\\\\PackageFilter.js\",\n  _s = $RefreshSig$();\n// frontend/src/PackageFilter.js - WITH DYNAMIC PLACES & COUNTRIES\n\nimport React, { useState, useEffect } from 'react';\nimport FilterModal from './FilterModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PERSON_OPTIONS = Array.from({\n  length: 10\n}, (_, i) => i + 1);\nconst PAYMENT_OPTIONS = [\"UPI\", \"Debit/Credit Cards\", \"Offline Payment\"];\nfunction PackageFilter({\n  onFilter\n}) {\n  _s();\n  const [places, setPlaces] = useState([]);\n  const [countries, setCountries] = useState([]);\n  const [persons, setPersons] = useState(1);\n  const [payment, setPayment] = useState(\"UPI\");\n\n  // Dynamic options from database\n  const [placeOptions, setPlaceOptions] = useState([]);\n  const [countryOptions, setCountryOptions] = useState([]);\n  const [openModal, setOpenModal] = useState(null);\n\n  // Fetch available places and countries from database\n  useEffect(() => {\n    const fetchOptions = async () => {\n      try {\n        const response = await fetch('/api/tours');\n        if (response.ok) {\n          const tours = await response.json();\n\n          // Extract unique places and countries\n          const uniquePlaces = [...new Set(tours.map(t => t.name))];\n          const uniqueCountries = [...new Set(tours.map(t => t.country))];\n          setPlaceOptions(uniquePlaces);\n          setCountryOptions(uniqueCountries);\n        }\n      } catch (error) {\n        console.error('Error fetching filter options:', error);\n      }\n    };\n    fetchOptions();\n  }, []);\n  const handleToggle = (item, setState, currentState) => {\n    if (currentState.includes(item)) {\n      setState(currentState.filter(i => i !== item));\n    } else {\n      setState([...currentState, item]);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onFilter({\n      places,\n      countries,\n      persons,\n      payment\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"package-filter-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setOpenModal('places'),\n        className: \"filter-btn\",\n        children: [\"Places (\", places.length || 'All', \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setOpenModal('countries'),\n        className: \"filter-btn\",\n        children: [\"Countries (\", countries.length || 'All', \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: persons,\n        onChange: e => setPersons(e.target.value),\n        className: \"filter-dropdown single-select\",\n        children: PERSON_OPTIONS.map(num => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: num,\n          children: [num, \" Persons\"]\n        }, num, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 48\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: payment,\n        onChange: e => setPayment(e.target.value),\n        className: \"filter-dropdown single-select\",\n        children: PAYMENT_OPTIONS.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, opt, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 49\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"filter-submit-btn\",\n        children: \"Filter Packages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), openModal === 'places' && /*#__PURE__*/_jsxDEV(FilterModal, {\n      title: \"Places\",\n      options: placeOptions,\n      selectedItems: places,\n      onToggle: item => handleToggle(item, setPlaces, places),\n      onClose: () => setOpenModal(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }, this), openModal === 'countries' && /*#__PURE__*/_jsxDEV(FilterModal, {\n      title: \"Countries\",\n      options: countryOptions,\n      selectedItems: countries,\n      onToggle: item => handleToggle(item, setCountries, countries),\n      onClose: () => setOpenModal(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n_s(PackageFilter, \"yYx9F2DlKBZ0KZX8yCiyj6NDjXk=\");\n_c = PackageFilter;\nexport default PackageFilter;\nvar _c;\n$RefreshReg$(_c, \"PackageFilter\");","map":{"version":3,"names":["React","useState","useEffect","FilterModal","jsxDEV","_jsxDEV","Fragment","_Fragment","PERSON_OPTIONS","Array","from","length","_","i","PAYMENT_OPTIONS","PackageFilter","onFilter","_s","places","setPlaces","countries","setCountries","persons","setPersons","payment","setPayment","placeOptions","setPlaceOptions","countryOptions","setCountryOptions","openModal","setOpenModal","fetchOptions","response","fetch","ok","tours","json","uniquePlaces","Set","map","t","name","uniqueCountries","country","error","console","handleToggle","item","setState","currentState","includes","filter","handleSubmit","e","preventDefault","children","onSubmit","className","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","num","opt","title","options","selectedItems","onToggle","onClose","_c","$RefreshReg$"],"sources":["C:/Users/rocky/OneDrive/Desktop/tms-project/frontend/src/PackageFilter.js"],"sourcesContent":["// frontend/src/PackageFilter.js - WITH DYNAMIC PLACES & COUNTRIES\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport FilterModal from './FilterModal';\r\n\r\nconst PERSON_OPTIONS = Array.from({ length: 10 }, (_, i) => i + 1);\r\nconst PAYMENT_OPTIONS = [\"UPI\", \"Debit/Credit Cards\", \"Offline Payment\"];\r\n\r\nfunction PackageFilter({ onFilter }) {\r\n    const [places, setPlaces] = useState([]); \r\n    const [countries, setCountries] = useState([]);\r\n    const [persons, setPersons] = useState(1);\r\n    const [payment, setPayment] = useState(\"UPI\");\r\n    \r\n    // Dynamic options from database\r\n    const [placeOptions, setPlaceOptions] = useState([]);\r\n    const [countryOptions, setCountryOptions] = useState([]);\r\n    \r\n    const [openModal, setOpenModal] = useState(null);\r\n\r\n    // Fetch available places and countries from database\r\n    useEffect(() => {\r\n        const fetchOptions = async () => {\r\n            try {\r\n                const response = await fetch('/api/tours');\r\n                if (response.ok) {\r\n                    const tours = await response.json();\r\n                    \r\n                    // Extract unique places and countries\r\n                    const uniquePlaces = [...new Set(tours.map(t => t.name))];\r\n                    const uniqueCountries = [...new Set(tours.map(t => t.country))];\r\n                    \r\n                    setPlaceOptions(uniquePlaces);\r\n                    setCountryOptions(uniqueCountries);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching filter options:', error);\r\n            }\r\n        };\r\n        \r\n        fetchOptions();\r\n    }, []);\r\n\r\n    const handleToggle = (item, setState, currentState) => {\r\n        if (currentState.includes(item)) {\r\n            setState(currentState.filter(i => i !== item));\r\n        } else {\r\n            setState([...currentState, item]);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onFilter({ places, countries, persons, payment });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <form onSubmit={handleSubmit} className=\"package-filter-form\">\r\n                \r\n                <button type=\"button\" onClick={() => setOpenModal('places')} className=\"filter-btn\">\r\n                    Places ({places.length || 'All'})\r\n                </button>\r\n\r\n                <button type=\"button\" onClick={() => setOpenModal('countries')} className=\"filter-btn\">\r\n                    Countries ({countries.length || 'All'})\r\n                </button>\r\n\r\n                <select value={persons} onChange={(e) => setPersons(e.target.value)} className=\"filter-dropdown single-select\">\r\n                    {PERSON_OPTIONS.map(num => <option key={num} value={num}>{num} Persons</option>)}\r\n                </select>\r\n\r\n                <select value={payment} onChange={(e) => setPayment(e.target.value)} className=\"filter-dropdown single-select\">\r\n                    {PAYMENT_OPTIONS.map(opt => <option key={opt} value={opt}>{opt}</option>)}\r\n                </select>\r\n\r\n                <button type=\"submit\" className=\"filter-submit-btn\">Filter Packages</button>\r\n            </form>\r\n\r\n            {openModal === 'places' && (\r\n                <FilterModal\r\n                    title=\"Places\"\r\n                    options={placeOptions}\r\n                    selectedItems={places}\r\n                    onToggle={(item) => handleToggle(item, setPlaces, places)}\r\n                    onClose={() => setOpenModal(null)}\r\n                />\r\n            )}\r\n            {openModal === 'countries' && (\r\n                <FilterModal\r\n                    title=\"Countries\"\r\n                    options={countryOptions}\r\n                    selectedItems={countries}\r\n                    onToggle={(item) => handleToggle(item, setCountries, countries)}\r\n                    onClose={() => setOpenModal(null)}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport defaultÂ PackageFilter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}